<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Latest Temperature Scraper</title>
</head>
<body>
  <h1>Latest Temperature Observation</h1>
  <div id="result">Fetching data...</div>

  <script>
    // Using a CORS proxy to bypass cross-origin restrictions.
    const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
    const targetUrl = 'https://www.weather.gov/wrh/LowTimeseries?site=kday';

    fetch(proxyUrl + targetUrl)
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not OK');
        }
        return response.text();
      })
      .then(data => {
        // Parse the returned HTML
        const parser = new DOMParser();
        const doc = parser.parseFromString(data, 'text/html');

        // Get all table cells
        const cells = Array.from(doc.querySelectorAll('td'));
        let temperature = null;

        // Loop over each cell and try to identify one that contains only a number.
        for (let cell of cells) {
          const text = cell.textContent.trim();
          // If the cell text consists only of digits, assume it's the temperature.
          if (/^\d+$/.test(text)) {
            temperature = text;
            break;
          }
        }

        if (temperature) {
          document.getElementById('result').textContent = 'Latest Temperature: ' + temperature;
        } else {
          document.getElementById('result').textContent = 'Temperature element not found. Please adjust your selector.';
        }
      })
      .catch(error => {
        document.getElementById('result').textContent = 'Error fetching data: ' + error;
        console.error('Fetch error:', error);
      });
  </script>
</body>
</html>
